<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Seeing Machines CoreData API: CoreData C++ Example Applications</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.0 -->
<h1><a class="anchor" name="coreapi_coredata_cpp_exampleapps">CoreData C++ Example Applications</a></h1><ul>
<li><a class="el" href="coreapi_coredata_cpp_exampleapps.html#coreapi_coredata_cpp_exampleapps_log2net">log2net - Reads logfile data and send it over the network</a><br>
</li><li><a class="el" href="coreapi_coredata_cpp_exampleapps.html#coreapi_coredata_cpp_exampleapps_net2log">net2log - Writes data from the network to log files</a><br>
</li><li><a class="el" href="coreapi_coredata_cpp_exampleapps.html#coreapi_coredata_cpp_exampleapps_logconverter">logconverter - Reads and converts log file data</a><br>
</li><li><a class="el" href="coreapi_coredata_cpp_exampleapps.html#coreapi_coredata_cpp_exampleapps_serialreceive">serialreceive - Receives faceLAB/DSS Serial Packets</a><br>
</li><li><a class="el" href="coreapi_coredata_cpp_exampleapps.html#coreapi_coredata_cpp_exampleapps_serial2log">serial2log - Write data from the serial port to log files</a><br>
</li><li><a class="el" href="coreapi_coredata_cpp_exampleapps.html#coreapi_coredata_cpp_exampleapps_udpclient">udpclient - Receives faceLAB/DSS UDP Packets</a><br>
</li><li><a class="el" href="coreapi_coredata_cpp_exampleapps.html#coreapi_coredata_cpp_exampleapps_tcpclient">tcpclient - Receives faceLAB/DSS TCP Packets</a><br>
</li><li><a class="el" href="coreapi_coredata_cpp_exampleapps.html#coreapi_coredata_cpp_exampleapps_eodcompressor">eodcompressor - Compresses eod files</a><br>
</li></ul>
<p>
<hr>
 <h2><a class="anchor" name="coreapi_coredata_cpp_exampleapps_log2net">
log2net - Reads logfile data and send it over the network</a></h2>
The log2net console application reads data from binary faceLAB/DSS log file(s) and then sends it to a network host using UDP.<h3><a class="anchor" name="coreapi_coredata_cpp_exampleapps_log2net_usage">
Usage</a></h3>
To use the supplied version of log2net, run it with the arguments:<ol type=1>
<li><b>Dir</b>: Source of the logfile(s) to send. The tool will merge the .fll files within the folder into network packets and send them over the network. Note that the folder must contain exactly one set of faceLAB/DSS logfiles (i.e. one timing data file, etc).</li><li><b>Hostname or IP Address</b>: An optional argument for the host to send to. The default is localhost.</li><li><b>Port number</b>: An optional argument for the UDP port to send to. The default is 2001, although it can be any port in the range 2000 - 5000</li></ol>
<p>
This application is good for testing code that reads from the network, without having to run faceLAB/DSS all the time, since you can run your client, then run log2net and see if the client is reading the data OK.<p>
<b>Example 1:</b><br>
 <div class="fragment"><pre class="fragment">
log2net c:/data/subject23 2044
</pre></div><p>
Merges the data from the logfiles in c:/data/subject23, and send the resulting packets to localhost, port 2044.<p>
<b>Example 2:</b><br>
 <div class="fragment"><pre class="fragment">
log2net c:/data/subject42 simulator.local
</pre></div><p>
Merges the data from the logfiles in c:/data/subject42, and send the resulting packets to simulator.local, port 2001.<h3><a class="anchor" name="coreapi_coredata_cpp_exampleapps_log2net_mod">
Modifying</a></h3>
This application is mainly useful for testing some of the other applications. Modify the source file examples/log2net/log2net.cpp as you require, remembering that it may change when a new API is released.<p>
<hr>
 <h2><a class="anchor" name="coreapi_coredata_cpp_exampleapps_net2log">
net2log - Writes data from the network to log files</a></h2>
The net2log console application reads UDP data from a specified port and saves it to disk.<h3><a class="anchor" name="coreapi_coredata_cpp_exampleapps_net2log_usage">
Usage</a></h3>
To use the supplied version of net2log, run it with the arguments:<ol type=1>
<li><b>Directory</b>: The location to store the logged data. The data is logged into multiple logfiles with one logfile for each faceLAB/DSS output data type. For instance, in the case of faceLAB the network data is logged into 5 separate logfiles. The files created during logging over the network are exactly the same as the files created while logging to disk.</li><li><b>Port number</b>: An optional argument for the UDP port to receive from. The default is 2001, although it can be any port in the range 2000 - 5000</li></ol>
<p>
This application is useful if you want to quickly verify that network data is being received correctly. Be sure to stop logging in faceLAB before stopping the net2log client using Ctrl-C. Note that the logfile is saved in binary form.<p>
<b>Example 1:</b> <div class="fragment"><pre class="fragment">
net2log c:/test_data
</pre></div><p>
Saves any data received from a faceLAB/DSS system on port 2001 to c:/test_data.<p>
<b>Example 2:</b> <div class="fragment"><pre class="fragment">
net2log c:/test_data 3001
</pre></div> Saves any data received from a faceLAB/DSS system on port 3001 to c:/test_data.<h3><a class="anchor" name="coreapi_coredata_cpp_exampleapps_net2log_mod">
Modifying</a></h3>
This application is mainly useful for testing some of the other applications. Modify the source file examples/net2log/net2log.cpp as you require, remembering that it may change when a new API is released.<p>
<hr>
 <h2><a class="anchor" name="coreapi_coredata_cpp_exampleapps_logconverter">
logconverter -  Reads and converts log file data</a></h2>
The file logconverter.cpp converts binary logfile data into text format. The tool converts the specified logfile, or a list of the logfiles into a text version in the same folder. Text logfiles are column formatted, allowing them to be easily read into MATLAB or EXCEL.<h3><a class="anchor" name="coreapi_coredata_cpp_exampleapps_logconverter_usage">
Usage</a></h3>
To use the supplied version of logconverter, run it with the argument:<ol type=1>
<li><b>Filename(s)</b>: The logfile to convert, which must end in .fll</li></ol>
<p>
<b>Example 1:</b> <div class="fragment"><pre class="fragment">
logconverter test.fll
</pre></div> Converts test.fll to test.txt.<p>
<b>Example 2:</b> <div class="fragment"><pre class="fragment">
logconverter c:/faceLAB/logfiles/head.fll
</pre></div> Converts head.fll to text and saves in the c:/faceLAB/logfiles folder.<p>
Example 3: <div class="fragment"><pre class="fragment">
logconverter test.fll head.fll eyes.fll
</pre></div> Converts multiple files into the text format in one go.<h3><a class="anchor" name="coreapi_coredata_cpp_exampleapps_logconverter_mod">
Modifying</a></h3>
To minimize the changes you have to make when a new version of the API is released, we don’t recommend you change this application. It requires editing several of the core library files. If you do choose to modify this code (for example to only save a subset of the columns), try to make minimal changes and document these changes.<p>
<hr>
 <h2><a class="anchor" name="coreapi_coredata_cpp_exampleapps_serialreceive">
serialreceive -  Receives faceLAB/DSS Serial Packets</a></h2>
The program receives faceLAB/DSS packets transmitted over a serial port. The serial packet format and protocol is specified in Section 10 of this document.<h3><a class="anchor" name="coreapi_coredata_cpp_exampleapps_serialreceive_usage">
Usage</a></h3>
To use the supplied version of serialreceive, run it with the optional argument:<ol type=1>
<li><b>Serial port</b>: The port to send to, from COM1 to COM4 (Default is COM2). Note that faceLAB uses COM1 to control analog Sony cameras, so if your faceLAB is equipped with analog Sony cameras, specifying COM1 will not work on the same computer.</li></ol>
<p>
<b>Example 1:</b> <div class="fragment"><pre class="fragment">
serialreceive
</pre></div> Runs serialreceive, receiving packets from COM2<p>
<b>Example 2:</b> <div class="fragment"><pre class="fragment">
serialreceive COM1
</pre></div> Runs serialreceive, receiving packets from COM1<h3><a class="anchor" name="coreapi_coredata_cpp_exampleapps_serialreceive_mod">
Modifying</a></h3>
This project is designed for easy modification. The best place to modify the application is in the function handleEngineOutputData In this function, the data has already been read from the serial port and placed in the appropriate EngineOutputData structure.<p>
<hr>
 <h2><a class="anchor" name="coreapi_coredata_cpp_exampleapps_serial2log">
serial2log - Write data from the serial port to log files</a></h2>
The serial2log console application reads serial data from a specified serial port and saves it to disk<h3><a class="anchor" name="coreapi_coredata_cpp_exampleapps_serial2log_usage">
Usage</a></h3>
To use the supplied version of seria2log, run it with the arguments:<ol type=1>
<li><b>Directory</b>: The location to store the logged data. The data is logged into multiple logfiles with one logfile for each faceLAB/DSS output data type. For instance, in the case of DSS the serial data is logged into 4 separate logfiles.</li><li><b>Port number</b>: An optional argument for the serial port to receive from. The default is COM2, although it can be any port in the range COM1 to COM8</li></ol>
<p>
This application is useful if you want to quickly verify that serial data is being received correctly. Be sure to stop logging in faceLAB/DSS before stopping the serial2log client using Ctrl-C. Note that the logfile is saved in binary form.<p>
<b>Example 1:</b> <div class="fragment"><pre class="fragment">
serial2log c:/test_data
</pre></div> Save any data received from a faceLAB/DSS system on port COM2 to c:/test_data<p>
<b>Example 2:</b> <div class="fragment"><pre class="fragment">
serial2log c:/test_data COM3
</pre></div> Save any data received from a faceLAB/DSS system on port COM3 to c:/test_data<h3><a class="anchor" name="coreapi_coredata_cpp_exampleapps_serial2log_mod">
Modifying</a></h3>
This application is mainly useful for testing some of the other applications. Modify the source file examples/serial2log/serial2log.cpp as you require, remembering that it may change when a new API is released.<p>
<hr>
 <h2><a class="anchor" name="coreapi_coredata_cpp_exampleapps_udpclient">
udpclient - Receives faceLAB/DSS UDP Packets</a></h2>
The file udpclient.cpp contains a simple function that listens to a specified port for faceLAB/DSS UDP packets, reading each packet into an EngineOutputData object.<p>
The program is designed to be a starting point for an application that needs to receive faceLAB/DSS data over a UDP network connection.<h3><a class="anchor" name="coreapi_coredata_cpp_exampleapps_udpclient_usage">
Usage</a></h3>
To use the supplied version of udpclient, run it with the optional argument:<ol type=1>
<li><b>Port</b>: The UDP port number to listen on. The default is 2001, and it must be between 2000 and 5000.</li></ol>
<p>
<b>Example 1:</b> <div class="fragment"><pre class="fragment">
udpclient
</pre></div> Runs the udpclient, listening on port 2001.<p>
<b>Example 2:</b> <div class="fragment"><pre class="fragment">
udpclient 2010
</pre></div> Runs the udpclient, listening on port 2010.<h3><a class="anchor" name="coreapi_coredata_cpp_exampleapps_udpclient_mod">
Modifying</a></h3>
This project is designed for easy modification. The best place to modify the application is in the function <em>handleEngineOutputData</em>. In this function, the data has already been read from the network and placed in the EngineOutputData class structure. To use the structure, access the appropriate member of output_data. For example, to get the frame number use the notation: <em>output_data.frameNum()</em>. To get the head position, use <em><a class="el" href="namespacesm_1_1eod.html#992f781028939b8277987f29584bd01f">output_data.headOutputData()</a>-&gt;filteredHeadPosition()</em>.<p>
Refer to the EngineOutputData header file, or the HTML documentation for detailed information about the EngineOutputData contents.<p>
<hr>
 <h2><a class="anchor" name="coreapi_coredata_cpp_exampleapps_tcpclient">
tcpclient - Receives faceLAB/DSS TCP Packets</a></h2>
<h3><a class="anchor" name="coreapi_coredata_cpp_exampleapps_tcpclient_usage">
Usage</a></h3>
To use the supplied version of tcpclient, run it with the optional argument:<ol type=1>
<li><b>Port</b>: The UDP port number to listen on. The default is 2001, and it must be between 2000 and 5000.</li></ol>
<p>
<b>Example 1:</b> <div class="fragment"><pre class="fragment">
tcpclient
</pre></div> Runs the tcpclient, listening on port 2001.<p>
<b>Example 2:</b> <div class="fragment"><pre class="fragment">
tcpclient 2010
</pre></div> Runs the tcpclient, listening on port 2010.<h3><a class="anchor" name="coreapi_coredata_cpp_exampleapps_tcpclient_mod">
Modifying</a></h3>
This project is designed for easy modification. The best place to modify the application is in the function <em>handleEngineOutputData</em>. In this function, the data has already been read from the network and placed in the EngineOutputData class structure. To use the structure, access the appropriate member of output_data. For example, to get the frame number use the notation: <em>output_data.frameNum()</em>. To get the head position, use <em><a class="el" href="namespacesm_1_1eod.html#992f781028939b8277987f29584bd01f">output_data.headOutputData()</a>-&gt;filteredHeadPosition()</em>.<p>
Refer to the EngineOutputData header file, or the HTML documentation for detailed information about the EngineOutputData contents.<p>
<hr>
 <h2><a class="anchor" name="coreapi_coredata_cpp_exampleapps_eodcompressor">
eodcompressor - Compresses eod files</a></h2>
A simple utility to compress a .eod file.<h3><a class="anchor" name="coreapi_coredata_cpp_exampleapps_eodcompressor_usage">
Usage</a></h3>
<div class="fragment"><pre class="fragment">
eodcompressor [options] &lt;source_file&gt; &lt;dest_file&gt;

Options:
   -h                    Displays this usage information
   -c &lt;compression_name&gt; Selects compression to use.

Compression Names:
    uncompressed
    lossy-realtime
    lossy-good-quality
    lossy-best-quality
    lossless-realtime
    lossless-good-quality
    lossless-best-quality
</pre></div><p>
<b>Example:</b> <div class="fragment"><pre class="fragment">
eodcompressor -c lossy-realtime src.eod src-lossy-realtime.eod
</pre></div> Compressed the file <code>src.eod</code> using the compression profile <code>lossy-realtime</code> to file <code>src-lossy-realtime.eod</code>.<h3><a class="anchor" name="coreapi_coredata_cpp_exampleapps_eodcompressor_mod">
Code</a></h3>
The example demonstrates how to use the <a class="el" href="classsm_1_1eod_1_1io_1_1_compressing_file_writer.html">CompressingFileWriter</a> and <a class="el" href="classsm_1_1eod_1_1io_1_1_decompressing_file_reader.html">DecompressingFileReader</a> classes.<p>
 <div class="fragment"><pre class="fragment">    <span class="keywordtype">int</span> compressFile(<span class="keyword">const</span> CommandLineOptions&amp; options)
    {
        <span class="comment">// Display command line options</span>
        printOptions(options);

        <span class="comment">// The reader can also read uncompressed files</span>
        <a class="code" href="classsm_1_1eod_1_1io_1_1_decompressing_file_reader.html">sm::eod::io::DecompressingFileReader</a> reader(options.src_file);
        <a class="code" href="classsm_1_1eod_1_1io_1_1_compressing_file_writer.html">sm::eod::io::CompressingFileWriter</a> writer(options.dst_file);
        writer.setCompressionProfile(options.profile);

        size_t src_object_index = 0;
        <span class="keywordflow">while</span> (!reader.atEnd())
        {
            <a class="code" href="namespacesm_1_1eod.html#7f646d7d9c7e510a8374ce92dd61b388">DeserializationStatusFlags</a> status_out = 0;
            <a class="code" href="namespacesm_1_1eod.html#6f36de200c458ac513ef3683b5e3538d">SerializablePtr</a> data(reader.read(status_out));
            <span class="keywordflow">if</span> (status_out != <a class="code" href="namespacesm_1_1eod.html#67128cdb7f97be774bd85a4bda87d468e578fa00d550c0d78aa7be8074df7a98">DESERIALIZATION_COMPLETE</a>)
            {
                std::cerr &lt;&lt; <span class="stringliteral">"Read object #"</span> &lt;&lt; src_object_index &lt;&lt;
                    <span class="stringliteral">" was incomplete "</span> &lt;&lt; deserializationStatusString(status_out)
                    &lt;&lt; <span class="charliteral">'\n'</span>;
            }
            writer.write(data);

            ++src_object_index;
        }
        reader.close();
        writer.close();

        <span class="keywordflow">return</span> 0;
    } <span class="comment">// end of compressFile</span>
</pre></div><p>
This function performs the actual reading and compressing. <hr size="1"><address style="align: right;"><small>Generated on Fri Apr 1 15:36:50 2011 for Seeing Machines CoreData API by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.0 </small></address>
</body>
</html>
